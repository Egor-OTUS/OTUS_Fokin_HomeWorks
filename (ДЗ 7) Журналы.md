Virtual Box 7.2.4  
Ubuntu Server 25.10  
Характеристики ВМ  
RAM: 16GB  
CPU: 8 cores  
VDI(SSD): 200GB  
PostgreSQL 17  

***Настройте выполнение контрольной точки раз в 30 секунд.***  
Выставляем параметр checkpoint_timeout = 30s в файле /etc/postgresql/17/main/postgresql.conf  
<img width="907" height="34" alt="image" src="https://github.com/user-attachments/assets/941d3c5e-cc0d-4a71-b0e6-f255a00716d0" />

***10 минут c помощью утилиты pgbench подавайте нагрузку.***  
Сначала иницилизируем БД на которую будем подавать нагрузку с помощью pgbench -i postgres  
Подаем нагрузку с помощью pgbench -c8 -P 6 -T 600 -U postgres postgres  
<img width="430" height="224" alt="image" src="https://github.com/user-attachments/assets/5036a58c-7cf0-4405-8861-5b09fdd58be3" />

***Измерьте, какой объем журнальных файлов был сгенерирован за это время. Оцените, какой объем приходится в среднем на одну контрольную точку.***  
lsn до нагрузки  
<img width="317" height="83" alt="image" src="https://github.com/user-attachments/assets/561e8bf1-a7de-4010-90f1-b9309cb6458d" />

lsn после нагрузки  
<img width="312" height="91" alt="image" src="https://github.com/user-attachments/assets/b606e422-b2ef-4aeb-8549-a9c4545e726a" />

Объем сгенерированных за это время 787 473 968 байт, следовательно на одну контрольную точку приходтся в среднем 37.5MB  
<img width="574" height="88" alt="image" src="https://github.com/user-attachments/assets/3363a7ce-2a97-4d4b-a6e6-107543ac4976" />

***Проверьте данные статистики: все ли контрольные точки выполнялись точно по расписанию. Почему так произошло?***  
Контрольные точки выполнились точно, раз в 30с   
<img width="1863" height="608" alt="image" src="https://github.com/user-attachments/assets/577ac92b-580e-4495-a170-1a44be07f298" />

***Сравните tps в синхронном/асинхронном режиме утилитой pgbench. Объясните полученный результат.***  
Подаем нагрузку с помощью pgbench -c8 -P 6 -T 60 -U postgres postgres в синхронном режиме, tps = 1529  
<img width="368" height="182" alt="image" src="https://github.com/user-attachments/assets/3c2957f9-48da-44b8-a7c4-56d4bcd95741" />

Переводим в асинхронный режим  
<img width="375" height="107" alt="image" src="https://github.com/user-attachments/assets/ff001487-99de-4250-8286-41f5418f71af" />

Подаем нагрузку с помощью pgbench -c8 -P 6 -T 60 -U postgres postgres в aсинхронном режиме, tps = 7997  
<img width="367" height="179" alt="image" src="https://github.com/user-attachments/assets/5ab91978-214b-4505-9876-860fd847beeb" />

***Создайте новый кластер с включенной контрольной суммой страниц. Создайте таблицу. Вставьте несколько значений. Выключите кластер. Измените пару байт в таблице.***  
**Включите кластер и сделайте выборку из таблицы. Что и почему произошло? как проигнорировать ошибку и продолжить работу?**  

Создаем новый кластер с включенной контрольной суммой страниц  
<img width="1130" height="447" alt="image" src="https://github.com/user-attachments/assets/26c7879a-d809-4038-858d-3c7975ae4eed" />

Создание и наполение таблицы  
<img width="405" height="210" alt="image" src="https://github.com/user-attachments/assets/7f6694bc-27ad-4f6f-b83b-e22ee195ca7b" />

Предварительно находим OID таблицы чтобы в дальнейшем можно было найти таблицу после остановки кластера
<img width="808" height="82" alt="image" src="https://github.com/user-attachments/assets/4b439ee9-6f6e-4583-9ca5-0d570b72bdcb" />

Выключаем кластер, а затем изменяем пару байт в таблице по пути /etc/postgresql/17/main/base/5/16389  
<img width="765" height="53" alt="image" src="https://github.com/user-attachments/assets/5559ecad-70e2-49df-a7ed-d746680cf382" />

Включаем кластер и делаем выборку, падает в ошибку т.к. разные контрольные суммы  
<img width="936" height="101" alt="image" src="https://github.com/user-attachments/assets/33565760-2039-4f08-83f9-f31b3b22558a" />

Чтобы проигнорировать это необходимо выставить ignore_checksum_failure = on  
<img width="354" height="37" alt="image" src="https://github.com/user-attachments/assets/ca67e066-0e93-4643-bb3e-556b95d41ef5" />

После чего данные даст просмотреть без ошибок  
<img width="335" height="203" alt="image" src="https://github.com/user-attachments/assets/3330e0ce-9614-46b2-b20e-d489584eeacb" />




